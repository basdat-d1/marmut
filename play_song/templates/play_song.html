{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>Song Detail</title>
{% endblock meta %}

{% block content %}
{% include "navbar/navbar_pengguna.html" %}
<div class="bg-gradient-to-bl from-indigo-500/20 pt-28 h-screen flex justify-center">
    <div class="flex justify-center items-center h-full">
        <div class="text-center w-full">
            <h1 class="text-3xl text-white mt-6 mb-3">Song Detail</h1>
            <div class="bg-gray/20 rounded-3xl shadow-inner p-10" style="max-width: 100%; margin: auto;">
                <div class="flex justify-between items-start mb-6">
                    <div class="text-lg text-white">
                        <div style="text-align: left;">
                            <p><strong>Judul:</strong> {{ song_title }}</p>
                            <p><strong>Genre(s):</strong> 
                                {% for genre in genres %}
                                    {{ genre }}{% if not forloop.last %}, {% endif %}
                                {% endfor %}
                            </p>
                            <p><strong>Artist:</strong> {{ artist }}</p>
                            <p><strong>Songwriter(s):</strong> 
                                {% for songwriter in songwriters %}
                                    {{ songwriter }}{% if not forloop.last %}, {% endif %}
                                {% endfor %}
                            </p>
                            <p><strong>Durasi:</strong> {{ duration }}</p>
                            <p><strong>Tanggal Rilis:</strong> {{ release_date }}</p>
                            <p><strong>Tahun:</strong> {{ year }}</p>
                            <p><strong>Total Play:</strong> {{ total_plays }}</p>
                            <p><strong>Total Downloads:</strong> {{ total_downloads }}</p>
                            <p><strong>Album:</strong> {{ album_title }}</p>
                        </div>
                    </div>                    
                    <div class="flex">
                        <form method="POST">
                            {% csrf_token %}
                            <div class="mb-1">
                                <label for="progressSlider" class="block text-white"></label>
                                <input type="range" id="progressSlider" name="songProgress" min="0" max="100" value="0" class="w-full" onchange="updateSliderValue(this.value)">
                                <span id="sliderValue" class="block text-center text-white text-sm md:text-lg">0%</span>
                            </div>
                            <div class="flex flex-col space-y-2">
                                <button type="submit" formaction="{% url 'play_song:tambah_lagu_play_song' id_konten=id_konten %}" class="border-2 border-bluebright text-bluebright rounded-xl py-2 px-6 hover:bg-bluebright hover:text-black duration-200 text-sm md:text-lg">Add to Playlist</button>
                                <button type="submit" formaction="{% url 'play_song:download_song' id_konten=id_konten %}" class="border-2 border-bluebright text-bluebright rounded-xl py-2 px-6 hover:bg-bluebright hover:text-black duration-200 text-sm md:text-lg">Download</button>
                                <a href="{% url 'dashboard:dashboard_pengguna' %}" class="border-2 border-bluebright text-bluebright rounded-xl py-2 px-6 hover:bg-bluebright hover:text-black duration-200 text-sm md:text-lg">Kembali</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function updateSliderValue(value) {
        document.getElementById('sliderValue').innerText = value + '%';
    }
</script>
{% endblock content %}